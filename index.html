<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Flappy Dove</title>
<style>
  body, html {
    margin: 0;
    padding: 0;
    overflow: hidden;
    background: #87ceeb; /* sky blue */
  }
  canvas {
    display: block;
    margin: 0 auto;
    background: #87ceeb;
  }
</style>
</head>
<body>

<script>
// ------------------- LOGIN -------------------
let bannedWords = ["nigger","nigga","shit","fuck","ass","bitch","ginger"];
let username = prompt("Enter your username:");

function normalize(name) {
    name = name.toLowerCase().replace(/[^a-z]/g,'');
    let reversed = name.split('').reverse().join('');
    return {name, reversed};
}

let userAllowed = (() => {
    let n = normalize(username);
    for (let word of bannedWords) {
        if (n.name.includes(word) || n.reversed.includes(word)) {
            return false;
        }
    }
    return true;
})();

if(!userAllowed) {
    alert("This username is not allowed!");
    throw new Error("Blocked username");
}

// ------------------- GAME -------------------
let canvas = document.createElement("canvas");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;
document.body.appendChild(canvas);
let ctx = canvas.getContext("2d");

// Physics settings (slower ~2.3x)
let gravity = 0.26;
let jump = -4.35;
let pipeSpeed = 1.08;
let bird = {x: 50, y: 150, width: 30, height:30, velocity:0};
let score = 0;
let highScore = 0;

// Background buildings
let buildings = [];
for(let i=0;i<10;i++){
    buildings.push({
        x: i*100,
        width: 50 + Math.random()*50,
        height: 50 + Math.random()*150,
        color: "#555"
    });
}

// Pipes
let pipes = [];
let pipeWidth = 50;
let pipeGap = 150;
function addPipe(){
    let topHeight = 50 + Math.random()*(canvas.height-250);
    let bottomHeight = canvas.height - topHeight - pipeGap;
    pipes.push({x:canvas.width, top:topHeight, bottom:bottomHeight});
}
setInterval(addPipe, 2000);

// Draw background buildings
function drawBuildings(){
    for(let b of buildings){
        ctx.fillStyle = b.color;
        ctx.fillRect(b.x, canvas.height - b.height, b.width, b.height);
        b.x -= pipeSpeed/2; // slower movement for parallax
        if(b.x + b.width < 0) b.x = canvas.width;
    }
}

// Game loop
function gameLoop(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // Draw background
    drawBuildings();

    // Bird physics
    bird.velocity += gravity;
    bird.y += bird.velocity;

    // Draw bird
    ctx.fillStyle = "yellow";
    ctx.fillRect(bird.x, bird.y, bird.width, bird.height);

    // Draw pipes
    for(let i=0;i<pipes.length;i++){
        let p = pipes[i];
        p.x -= pipeSpeed;
        ctx.fillStyle = "green";
        ctx.fillRect(p.x,0,pipeWidth,p.top);
        ctx.fillRect(p.x,canvas.height-p.bottom,pipeWidth,p.bottom);

        // Collision
        if(bird.x + bird.width > p.x && bird.x < p.x + pipeWidth){
            if(bird.y < p.top || bird.y + bird.height > canvas.height - p.bottom){
                alert("Game Over! Score: "+score);
                bird.y = 150; bird.velocity = 0; pipes=[]; score=0;
            }
        }

        if(p.x + pipeWidth < 0){
            pipes.splice(i,1);
            i--;
            score++;
            if(score>highScore) highScore = score;
        }
    }

    // Draw score
    ctx.fillStyle = "black";
    ctx.font = "24px Arial";
    ctx.fillText("Score: "+score, 10,30);
    ctx.fillText("High: "+highScore, 10,60);

    requestAnimationFrame(gameLoop);
}
gameLoop();

// Tap to jump
document.addEventListener("click",()=>{ bird.velocity = jump; });
document.addEventListener("keydown",()=>{ bird.velocity = jump; });

// Optional: Hard Mode (type key to jump)
let hardMode = false; // set to true to enable
if(hardMode){
    document.addEventListener("keydown",(e)=>{ bird.velocity = jump; });
}

</script>

</body>
</html>
